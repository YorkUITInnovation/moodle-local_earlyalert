define("local_earlyalert/reports_preview",["exports","core/modal_factory","core/templates","core/ajax"],(function(_exports,_modal_factory,_templates,_ajax){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax);_exports.init=async()=>{const previewBtn=document.getElementById("id_preview_results");previewBtn&&previewBtn.addEventListener("click",(async()=>{const sqlInput=document.getElementById("id_sqlquery");if(!sqlInput)return;const sqlquery=sqlInput.value;console.log("SQL Query:",sqlquery);const[result]=await _ajax.default.call([{methodname:"earlyalert_get_table_results",args:{query:sqlquery,limit:100,offset:0,params:"{}"}}])[0].then((result=>{_modal_factory.default.create({title:"Preview Results",body:result.table,footer:"",large:!0}).then((modal=>{modal.show()}))})).catch((error=>{console.error(error)}))}))}}));

//# sourceMappingURL=reports_preview.min.js.map