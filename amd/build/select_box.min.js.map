{"version":3,"file":"select_box.min.js","sources":["../src/select_box.js"],"sourcesContent":["// File: amd/src/select_box.js\nimport ajax from 'core/ajax';\n\nconst selectBox = {\n    init: function(selector, method, placeholder) {\n        const selectElement = document.querySelector(selector);\n        if (!selectElement) return;\n\n        const searchInput = document.createElement('input');\n        searchInput.type = 'text';\n        searchInput.placeholder = 'Search...';\n        // Add some margin-bottom to the select element\n        selectElement.style.marginBottom = '10px';\n        // Add class form-control to the search input\n        searchInput.classList.add('form-control');\n        searchInput.style.display = 'none'; // Initially hide the search input\n        selectElement.parentNode.insertBefore(searchInput, selectElement.nextSibling);\n\n        selectElement.addEventListener('click', function () {\n\n            searchInput.style.display = 'block'; // Show the search input when the select element is clicked\n            // Focus the search input\n            searchInput.focus();\n        });\n        // add <option value=\"\">Select a user</option> to the selectElement\n        const opt = document.createElement('option');\n        opt.value = '';\n        opt.textContent = placeholder;\n\n        searchInput.addEventListener('input', function () {\n            const searchTerm = searchInput.value;\n            if (searchTerm.length < 3) return; // Minimum 3 characters to search\n\n            ajax.call([{\n                methodname: method,\n                args: {search: searchTerm},\n                done: function (response) {\n                    updateOptions(selectElement, response);\n                },\n                fail: function (error) {\n                    console.error(error);\n                }\n            }]);\n        });\n\n        function updateOptions(select, options) {\n            select.innerHTML = ''; // Clear existing options\n            // add <option value=\"\">Select a user</option> to the selectElement\n            select.appendChild(opt);\n            // Open the options list\n            select.size = options.length + 2;\n\n            options.forEach(option => {\n\n                const opt = document.createElement('option');\n                opt.value = option.value;\n                opt.textContent = option.label;\n                select.appendChild(opt);\n            });\n        }\n\n        if (selectElement.hasAttribute('multiple')) {\n            selectElement.addEventListener('change', function () {\n                const selectedOptions = Array.from(selectElement.selectedOptions).map(opt => opt.value);\n            });\n        }\n    }\n};\n\nexport default selectBox;"],"names":["init","selector","method","placeholder","selectElement","document","querySelector","searchInput","createElement","type","style","marginBottom","classList","add","display","parentNode","insertBefore","nextSibling","addEventListener","focus","opt","value","textContent","searchTerm","length","call","methodname","args","search","done","response","select","options","innerHTML","appendChild","size","forEach","option","label","fail","error","console","hasAttribute","Array","from","selectedOptions","map"],"mappings":"gPAGkB,CACdA,KAAM,SAASC,SAAUC,OAAQC,mBACvBC,cAAgBC,SAASC,cAAcL,cACxCG,cAAe,aAEdG,YAAcF,SAASG,cAAc,SAC3CD,YAAYE,KAAO,OACnBF,YAAYJ,YAAc,YAE1BC,cAAcM,MAAMC,aAAe,OAEnCJ,YAAYK,UAAUC,IAAI,gBAC1BN,YAAYG,MAAMI,QAAU,OAC5BV,cAAcW,WAAWC,aAAaT,YAAaH,cAAca,aAEjEb,cAAcc,iBAAiB,SAAS,WAEpCX,YAAYG,MAAMI,QAAU,QAE5BP,YAAYY,iBAGVC,IAAMf,SAASG,cAAc,UACnCY,IAAIC,MAAQ,GACZD,IAAIE,YAAcnB,YAElBI,YAAYW,iBAAiB,SAAS,iBAC5BK,WAAahB,YAAYc,MAC3BE,WAAWC,OAAS,iBAEnBC,KAAK,CAAC,CACPC,WAAYxB,OACZyB,KAAM,CAACC,OAAQL,YACfM,KAAM,SAAUC,cASDC,OAAQC,QAAAA,QARUF,UAQlBC,OARG3B,eASf6B,UAAY,GAEnBF,OAAOG,YAAYd,KAEnBW,OAAOI,KAAOH,QAAQR,OAAS,EAE/BQ,QAAQI,SAAQC,eAENjB,IAAMf,SAASG,cAAc,UACnCY,IAAIC,MAAQgB,OAAOhB,MACnBD,IAAIE,YAAce,OAAOC,MACzBP,OAAOG,YAAYd,SAlBnBmB,KAAM,SAAUC,OACZC,QAAQD,MAAMA,cAqBtBpC,cAAcsC,aAAa,aAC3BtC,cAAcc,iBAAiB,UAAU,WACbyB,MAAMC,KAAKxC,cAAcyC,iBAAiBC,KAAI1B,KAAOA,IAAIC"}