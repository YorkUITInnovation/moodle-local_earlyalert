define("local_earlyalert/course_overview_updating",["exports","core/ajax","core/templates","core/modal_factory","core/str","core/toast"],(function(_exports,_ajax,_templates,_modal_factory,_str,_toast){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates),_modal_factory=_interopRequireDefault(_modal_factory);_exports.init=()=>{document.querySelectorAll(".checkbox-advisor-followup").forEach((function(checkbox){checkbox.addEventListener("change",(function(){const logId=this.getAttribute("data-logid"),status=this.checked?1:0;_ajax.default.call([{methodname:"earlyalert_update_student_status_advisor",args:{logid:logId,status:status}}])[0].then((function(response){console.log(response),(0,_toast.add)((0,_str.get_string)("advised_success_toast","local_earlyalert"),{delay:1e4,closeButton:!0})})).catch((function(error){console.error("Failed to update student status:",error),(0,_toast.add)((0,_str.get_string)("advised_failed_toast","local_earlyalert"),{delay:1e4,closeButton:!0})}))}))})),document.querySelectorAll(".checkbox-instructor-followup").forEach((function(checkbox){checkbox.addEventListener("change",(function(){const logId=this.getAttribute("data-logid"),status=this.checked?1:0;_ajax.default.call([{methodname:"earlyalert_update_student_status_instructor",args:{logid:logId,status:status}}])[0].then((function(response){console.log(response),(0,_toast.add)((0,_str.get_string)("advised_success_toast","local_earlyalert"),{delay:1e4,closeButton:!0})})).catch((function(error){console.error("Failed to update student status:",error),(0,_toast.add)((0,_str.get_string)("advised_failed_toast","local_earlyalert"),{delay:1e4,closeButton:!0})}))}))})),document.querySelectorAll(".btn-early-alert-preview-message").forEach((function(previewButton){previewButton.addEventListener("click",(function(){const logId=this.getAttribute("data-logid");_ajax.default.call([{methodname:"earlyalert_get_message",args:{logid:logId}}])[0].then((function(response){_modal_factory.default.create({title:(0,_str.get_string)("preview_email","local_earlyalert"),type:_modal_factory.default.types.CANCEL,body:_templates.default.render("local_earlyalert/preview_student_email",response),large:!0}).then((modal=>{modal.show()}))})).catch((function(error){console.error("Failed to preview message:",error)}))}))}))}}));

//# sourceMappingURL=course_overview_updating.min.js.map