{"version":3,"file":"reports_preview.min.js","sources":["../src/reports_preview.js"],"sourcesContent":["import ModalFactory from 'core/modal_factory';\nimport Templates from 'core/templates';\nimport Ajax from 'core/ajax';\n\nexport const init = async () => {\n    const previewBtn = document.getElementById('id_preview_results');\n    if (!previewBtn) return;\n    previewBtn.addEventListener('click', async () => {\n        const sqlInput = document.getElementById('id_sqlquery');\n        if (!sqlInput) return;\n        const sqlquery = sqlInput.value;\n        console.log('SQL Query:', sqlquery);\n\n        const [result] = await Ajax.call([\n            {\n                methodname: 'earlyalert_get_table_results',\n                args: {\n                    query: sqlquery,\n                    limit: 100, // Adjust limit as needed\n                    offset: 0, // Adjust offset as needed\n                    params: '{}' // Add any additional parameters if required\n                }\n            }\n        ])[0].then(result => {\n            const modal = ModalFactory.create({\n                title: 'Preview Results',\n                body: result.table,\n                footer: '',\n                large: true,\n            }).then(modal => {\n                modal.show();\n            });\n        }).catch(error => {\n            // Optionally handle error\n            console.error(error);\n        });\n\n    });\n};\n\n"],"names":["async","previewBtn","document","getElementById","addEventListener","sqlInput","sqlquery","value","console","log","result","Ajax","call","methodname","args","query","limit","offset","params","then","ModalFactory","create","title","body","table","footer","large","modal","show","catch","error"],"mappings":"idAIoBA,gBACVC,WAAaC,SAASC,eAAe,sBACtCF,YACLA,WAAWG,iBAAiB,SAASJ,gBAC3BK,SAAWH,SAASC,eAAe,mBACpCE,SAAU,aACTC,SAAWD,SAASE,MAC1BC,QAAQC,IAAI,aAAcH,gBAEnBI,cAAgBC,cAAKC,KAAK,CAC7B,CACIC,WAAY,+BACZC,KAAM,CACFC,MAAOT,SACPU,MAAO,IACPC,OAAQ,EACRC,OAAQ,SAGjB,GAAGC,MAAKT,SACOU,uBAAaC,OAAO,CAC9BC,MAAO,kBACPC,KAAMb,OAAOc,MACbC,OAAQ,GACRC,OAAO,IACRP,MAAKQ,QACJA,MAAMC,aAEXC,OAAMC,QAELtB,QAAQsB,MAAMA"}