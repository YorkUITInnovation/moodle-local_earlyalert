{"version":3,"file":"filter_students_grade.min.js","sources":["../src/filter_students_grade.js"],"sourcesContent":["import ajax from 'core/ajax';\nimport Templates from 'core/templates';\nimport ModalFactory from 'core/modal_factory';\nimport {get_string as getString} from 'core/str';\nimport notification from 'core/notification';\n\nexport const init = () => {\n    alert_type_button();\n    // get_users();\n};\n\nfunction alert_type_button() {\n    // Get data-link when .early-alert-type-button link is clicked\n    document.addEventListener('click', function (event) {\n        if (event.target.classList.contains('early-alert-type-button')) {\n            let alert_type = event.target.getAttribute('data-link');\n            let course_name = event.target.getAttribute('data-name');\n            let course_id = event.target.getAttribute('data-course_id');\n            // Get student list based on alert type\n            setup_filter_students_by_grade(course_id, 9, course_name, alert_type);\n        }\n    });\n}\n\n\n/**\n * Adds students with grades\n */\n// function filter_students_by_default_grade() {\n//\n//     // Get course id from the hidden input field wiht id early_alert_filter_course_id\n//     const course_id = document.getElementById('early_alert_filter_course_id').value;\n//     // initial default setup of student list\n//     setup_filter_students_by_grade(course_id, 9); // extract this 9 from php which might be configurable in the future\n//\n// }\n\nfunction filter_students_by_grade_select() {\n\n    // Get the s delected grade value from the dropdown\n    const grade_select = document.getElementById('id_early_alert_filter_grade_select');\n    const course_id = document.getElementById('early_alert_filter_course_id').value;\n    const course_name = document.getElementById('early_alert_course_name').value;\n    const alert_type = document.getElementById('early-alert-alert-type').value;\n    // setup listener for drop down selection\n\n    grade_select.addEventListener('change', function (e) {\n        let grade_letter_id = e.target.value;\n        setup_filter_students_by_grade(course_id, grade_letter_id, course_name, alert_type);\n\n    });\n}\n\n/**\n * Fetches the student list based on the course_id and grade_letter_id\n * @param course_id\n * @param grade_letter_id\n * @param course_name\n * @param alert_type\n */\nfunction setup_filter_students_by_grade(course_id, grade_letter_id, course_name, alert_type) {\n    let selected_students = [];\n    // convert course_id into an integer\n    course_id = parseInt(course_id);\n    grade_letter_id = parseInt(grade_letter_id);\n    // Add course_id to element with id early_alert_filter_course_id\n    document.getElementById('early_alert_filter_course_id').value = course_id;\n    // Add alert type to element with id early-alert-alert-type\n    document.getElementById('early-alert-alert-type').value = alert_type;\n    // Add course name to element with id early_alert_course_name\n    document.getElementById('early_alert_course_name').value = course_name;\n\n    // Only display if course_id is greater than 0\n    if (course_id > 0) {\n        //Show loader\n        Templates.render('local_earlyalert/loader', {})\n            .then(function (html, js) {\n                // Insert the rendered template into the target element\n                document.getElementById('early-alert-student-results').innerHTML = html;\n                Templates.runTemplateJS(js);\n            })\n            .catch(function (error) {\n                console.error('Failed to render template:', error);\n            });\n\n\n\n        // Fetch student list and templates\n        var get_grades_and_templates = ajax.call([\n            { methodname: 'earlyalert_course_grades_percent_get', args: { id: course_id, grade_letter_id: grade_letter_id } },\n            { methodname: 'earlyalert_course_student_templates', args: { id: course_id } }\n        ]);\n\n        const finalCache = new Map();\n\n        Promise.all(get_grades_and_templates).then(([grades_response, templates_response]) => {\n\n            // Reformat the data to display in a grid\n            let num_students = grades_response.length;\n            console.log('Number of students returned: ' + num_students);\n            let num_rows = Math.min(3, Math.ceil(num_students / 3));\n            let num_cols = Math.ceil(num_students / num_rows);\n            let display_data = {\n                num_rows: num_rows,\n                num_cols: num_cols,\n                student_rows: []\n            };\n\n            let templates = [];\n\n// Initialize rows array\n            for (let r = 0; r < num_rows; r++) {\n                display_data.student_rows[r] = {students: []};\n            }\n\n            let row = 0;\n            let col = 0;\n\n            grades_response.forEach(result => {\n                if (typeof result === 'object') {\n                    if (!templates.includes(result.campus + \"_\" + result.faculty + \"_\" + result.major)) {\n                        templates.push(result.campus + \"_\" + result.faculty + \"_\" + result.major);\n                    }\n                    display_data.student_rows[row].students[col] = result;\n                    col++;\n                    if (col === num_cols) {\n                        col = 0;\n                        row++;\n                    }\n                }\n            });\n\n            display_data.templates = JSON.stringify(templates);\n\n            if (alert_type === 'grade') {\n                // Add alert_type to display_data\n                display_data.alert_type = 'Low Grade';\n                display_data.grade = true;\n            }\n\n            if (alert_type === 'assign') {\n                // Add alert_type to display_data\n                display_data.alert_type = 'Missed Assignment';\n                display_data.assign = true;\n            }\n\n            if (alert_type === 'exam') {\n                // Add alert_type to display_data\n                display_data.alert_type = 'Missed Exam';\n                display_data.exam = true;\n            }\n            display_data.fullname = course_name;\n\n            // Render the template with display_data\n            Templates.render('local_earlyalert/course_student_list', display_data)\n                .then(function (html, js) {\n                    // Insert the rendered template into the target element\n                    document.getElementById('early-alert-student-results').innerHTML = html;\n                    Templates.runTemplateJS(js);\n                    // set default grade letter selected\n                    let grade_select = document.getElementById('id_early_alert_filter_grade_select');\n                    grade_select.value = grade_letter_id;\n                    // setup listener\n                    // filter_students_by_grade_select();\n                    check_all_student_grades(selected_students);\n                    check_allnone_listener(selected_students);\n\n                    const cachedArrayElement = document.getElementById('early-alert-template-cache');\n                    const cachedArray = JSON.parse(cachedArrayElement.value);\n\n                    templates_response.forEach(result => {\n                        if (typeof result === 'object') {\n                            if (cachedArray.includes(result.templateKey)){\n                                // finalCache.push({key: result.templateKey, value: result.message});\n                                let finalMessage = {subject: result.subject, message: result.message};\n                                finalCache.set(result.templateKey, finalMessage);\n                            }\n                        }\n                    });\n                    finalCache.set('course_name', course_name);\n                    setup_preview_emails(finalCache);\n                    setup_send_emails();\n                })\n                .catch(function (error) {\n                    console.error('Failed to render template:', error);\n                });\n        });\n\n    }\n}\n\n\nfunction check_all_student_grades(selected_students) {\n    const student_ids_selected = document.getElementById(\"early-alert-student-ids\") || {};\n    student_ids_selected.value = [];\n    const check_all_none_checkbox = document.getElementById('early-alert-checkall-student-checkbox');\n    check_all_none_checkbox.checked = true;\n    //check box for grade showing - remove later\n    const student_checkboxes = document.querySelectorAll(\"input[class^='early-alert-student-checkbox']\");\n    // check box for grade showing - remove later\n    student_checkboxes.forEach(function (checkbox) {\n        checkbox.checked = true;\n        selected_students.push(checkbox.getAttribute('data-student-id'));\n    });\n    student_ids_selected.value = JSON.stringify(selected_students);\n}\n\nfunction check_allnone_listener(selected_students) {\n    // Add an event listener to the select all checkbox\n    const check_all_none_checkbox = document.getElementById('early-alert-checkall-student-checkbox');\n    const student_ids_selected = document.getElementById(\"early-alert-student-ids\") || {};\n\n    check_all_none_checkbox.addEventListener('click', function () {\n        student_ids_selected.value = [];\n        // Get all checkboxes within the list\n        let checkboxes = document.querySelectorAll(\"input[class^='early-alert-student-checkbox']\");\n        // Loop through each checkbox and toggle its selection based on the state of the select all checkbox\n        checkboxes.forEach(function (checkbox) {\n            if (check_all_none_checkbox.checked) {\n                checkbox.checked = true;\n                selected_students.push(checkbox.getAttribute('data-student-id'));\n            } else {\n                checkbox.checked = false;\n                selected_students = selected_students.filter(item => item !== checkbox.getAttribute('data-student-id'));\n            }\n        });\n        student_ids_selected.value = JSON.stringify(selected_students);\n    });\n}\n\nfunction setup_preview_emails(templateCache) {\n    const preview_buttons = document.querySelectorAll(\".early-alert-preview-button\");\n    // Loop through each checkbox and toggle its selection based on the state of the select all checkbox\n    //console.log(\"template cache:\", templateCache);\n    preview_buttons.forEach(function (button) {\n        let record_data = {};\n        const checkbox = button.closest('tr').querySelector('.early-alert-student-checkbox');\n        const assigngrade = button.closest('tr').querySelector('.early-alert-grade-column').querySelector('.badge').innerHTML;\n        const grade_select = document.getElementById('id_early_alert_filter_grade_select');\n        let selected_grade = grade_select.options[grade_select.selectedIndex].text;\n        if (checkbox) {\n\n            // now, access the parent <tr> element (the table row)\n            const table_row = checkbox.parentNode;\n            // extract the student name from the second <td> element within the table row\n            const student_name_td = table_row.nextElementSibling;\n            // fix and parse the name\n            const student_lname_fname = student_name_td.firstChild;\n            var student_name_arr = [];\n            var student_name = \"\";\n            student_lname_fname.data.split(/\\s*,\\s*/).forEach(function(me) {\n                student_name_arr.push(me);\n            });\n            student_name = student_name_arr[1] + ' ' + student_name_arr[0];\n            // console.log(student_name);\n            const student_id = checkbox.getAttribute('data-student-id');\n            const studentCampusAttr = checkbox.getAttribute('data-student-campus');\n            const studentFacultyAttr = checkbox.getAttribute('data-student-faculty');\n            const studentMajorAttr = checkbox.getAttribute('data-student-major');\n            var templateKey = studentCampusAttr  + '_'  + studentFacultyAttr  + '_'  + studentMajorAttr;\n            var templateEmailContent = '';\n            var templateEmailSubject = '';\n\n            if (templateCache.has(templateKey)) {\n                templateEmailSubject = templateCache.get(templateKey).subject;\n                templateEmailContent = templateCache.get(templateKey).message;\n            } else {\n                templateEmailSubject = 'Template not found';\n                templateEmailContent = 'Template not found';\n            }\n\n        } else {\n            // console.log(\"couldn't find checkbox :/\");\n        }\n        if (assigngrade){\n            // console.log(\"assign grade: \", assigngrade);\n        }\n        // console.log(\"template email content:\", templateEmailContent);\n\n        var params = {\n            studentname: student_name_arr,\n            assignmentgrade: assigngrade,\n            assignmenttitle: document.getElementById('early-alert-assignment-title') ? document.getElementById('early-alert-assignment-title').value : '',\n            coursename: templateCache.get('course_name'),\n            customgrade: grade_select.options[grade_select.selectedIndex].text,\n            defaultgrade: \"D+\"\n        };\n        templateEmailContent = addUserInfo(templateEmailContent, params );\n\n        // console.log(\"template email content post-addUserInfo:\", templateEmailContent);\n\n        // assemble record data for individual buttons which includes student and template data\n        record_data.student_name = student_name;\n        record_data.course_name = templateCache.get('course_name');\n        record_data.templateEmailSubject = templateEmailSubject;\n        record_data.templateEmailContent = templateEmailContent;\n\n        button.addEventListener('click', function () {\n            setup_preview_buttons_from_template(record_data)\n        });\n    });\n}\n\nfunction setup_preview_buttons_from_template(student_template_data) {\n\n    ModalFactory.create({\n        title: getString('preview_email', 'local_earlyalert'),\n        type: ModalFactory.types.CANCEL,\n        body: Templates.render('local_earlyalert/preview_student_email', {\n            name: student_template_data.template_name,\n            student_name: student_template_data.student_name,\n            subject: student_template_data.templateEmailSubject,\n            message: student_template_data.templateEmailContent,\n            instructor_name: ''\n        }),\n        large: true,\n    }).then(modal => {\n        modal.show();\n    });\n}\nfunction setup_send_emails() {\n    // Pop-up notification when .btn-local-organization-delete-advisor is clicked\n    const send_button = document.getElementById('early-alert-send-button1');\n    const send_button2 = document.getElementById('early-alert-send-button2');\n    var ids = document.getElementById(\"early-alert-student-ids\").value; // hidden field ids\n    send_button.addEventListener('click', function () {\n        create_notification_dialog(ids);\n    });\n    send_button2.addEventListener('click', function () {\n        create_notification_dialog(ids);\n    });\n}\n\nfunction create_notification_dialog(ids) {\n    // Get the data id attribute value\n    var send_string = getString('send_email', 'local_earlyalert');\n    var send_dialog_text = getString('send_dialog_text', 'local_earlyalert');\n    var send = getString('send', 'local_earlyalert');\n    var cancel = getString('cancel', 'local_earlyalert');\n    var sent_email = getString('sent_email', 'local_earlyalert');\n    var could_not_send_email = getString('could_not_send_email', 'local_earlyalert');\n    var sent_dialog_text = getString('sent_dialog_text', 'local_earlyalert');\n\n    // Notification\n    notification.confirm(send_string, send_dialog_text, send, cancel, function () {\n        // Delete the record\n        var sendEmail = ajax.call([{\n            methodname: 'local_earlyalert_sendEmail',\n            args: {\n                id: ids,\n            }\n        }]);\n        sendEmail[0].done(function () {\n            // success\n            notification.alert('Email', sent_email);\n        }).fail(function () {\n            //notification.alert(could_not_send_email);\n            notification.alert('Email', sent_dialog_text);\n        });\n    });\n}\n\n\nfunction show_grades() {\n    // check box for grade showing - remove later\n    const show_grade_checkbox = document.getElementById('id_early_alert_filter_grade_chk');\n    // check box for grade showing - remove later\n    show_grade_checkbox.addEventListener('click', function () {\n        let grade_pills = document.querySelectorAll(\"span.pill\");\n        grade_pills.forEach(function (grade_pill) {\n            if (show_grade_checkbox.checked) {\n                if (grade_pill.style.display == 'none') {\n                    grade_pill.style.display = 'block';\n                }\n            } else {\n                grade_pill.style.display = 'none';\n            }\n        });\n    });\n}\n\n/**\n * Get users from the search input\n */\nfunction get_users() {\n    const inputElement = document.getElementById('search');\n    const datalistElement = document.getElementById('early-alert-impersonate');\n\n    // Event listener for input element\n    inputElement.addEventListener('input', function (event) {\n        const query = event.target.value;\n        var get_users = ajax.call([{\n            methodname: 'organization_users_get',\n            args: {\n                name: query\n            }\n        }]);\n        /*get_users[0].done(function (users) {\n            console.log(users);\n            datalistElement.innerHTML = '';\n            users.forEach(user => {\n                const option = document.createElement('option');\n                option.value = user.id;\n                option.text = user.firstname + ' ' + user.lastname;\n                datalistElement.appendChild(option);\n            });\n            // When a selection is made, reload the page with the user_id as a parameter\n            inputElement.addEventListener('change', function (event) {\n                window.location.href = window.location.href + '?user_id=' + event.target.value;\n            });\n\n        }).fail(function (e) {\n            alert(e);\n            // fail gracefully somehow :'( ;\n        });*/\n    });\n}\n\nfunction addUserInfo(emailText, params) {\n    // Define text replacements\n    const textReplace = [\n        '[firstname]',\n        '[fullname]',\n        '[usergrade]',\n        '[customgrade]',\n        '[defaultgrade]',\n        '[coursetitle]',\n        '[assignmenttitle]'\n    ];\n\n    console.log(\"adduserinfo parameters = \", params);\n\n    // Build replacement info\n    let uniqueMatches = {};\n    for (let i = 0; i < textReplace.length; i++) {\n        if (emailText.includes(textReplace[i])) {\n            // Perform action for each unique match found\n            switch (i) {\n                case 0:\n                    // firstname action\n                    let firstNameText = params.studentname[1] ? params.studentname[1] : '{USER_NOT_FOUND}';\n                    uniqueMatches[i] = firstNameText;\n                    break;\n                case 1:\n                    // fullname action\n                    let targetUser = params.studentname[1] ? `${params.studentname[1]} ${params.studentname[0]}` : '{USER_NOT_FOUND}';\n                    uniqueMatches[i] = targetUser;\n                    break;\n                case 2:\n                    // usergrade action\n                    let userGradeText = params.assignmentgrade || '{GRADE NOT PROVIDED/FOUND}';\n                    uniqueMatches[i] = userGradeText;\n                    break;\n                case 3:\n                    // customgrade acton\n                    let customGradeText = params.customgrade || '{CUSTOM GRADE NOT PROVIDED/FOUND}';\n                    uniqueMatches[i] = customGradeText;\n                    break;\n                case 4:\n                    // defaultgrade acton\n                    let defaultGradeText = params.defaultgrade || '{DEFAULT GRADE NOT PROVIDED/FOUND}';\n                    uniqueMatches[i] = defaultGradeText;\n                    break;\n                case 5:\n                    // coursetitle action\n                    let courseTitleText = params.coursename || '{COURSE TITLE NOT FOUND}';\n                    uniqueMatches[i] = courseTitleText;\n                    break;\n                case 6:\n                    // assignmenttitle action\n                    let assignmentTitleText = params.assignmenttitle || '{ASSIGNMENT TITLE NOT FOUND}';\n                    uniqueMatches[i] = assignmentTitleText;\n                    break;\n            }\n        }\n    }\n    // Replace the text with the matched values\n    for (let i = 0; i < textReplace.length; i++) {\n        if (uniqueMatches[i]) {\n            emailText = emailText.replace(textReplace[i], uniqueMatches[i]);\n            // emailText = emailText.replace(new RegExp(textReplace[i], 'g'), uniqueMatches[i]);\n        }\n    }\n    return emailText;\n}\n"],"names":["setup_filter_students_by_grade","course_id","grade_letter_id","course_name","alert_type","selected_students","parseInt","document","getElementById","value","render","then","html","js","innerHTML","runTemplateJS","catch","error","console","get_grades_and_templates","ajax","call","methodname","args","id","finalCache","Map","Promise","all","_ref","grades_response","templates_response","num_students","length","log","num_rows","Math","min","ceil","num_cols","display_data","student_rows","templates","r","students","row","col","forEach","result","includes","campus","faculty","major","push","JSON","stringify","grade","assign","exam","fullname","student_ids_selected","checked","querySelectorAll","checkbox","getAttribute","check_all_student_grades","check_all_none_checkbox","addEventListener","filter","item","check_allnone_listener","cachedArrayElement","cachedArray","parse","templateCache","templateKey","finalMessage","subject","message","set","button","record_data","closest","querySelector","assigngrade","grade_select","options","selectedIndex","text","student_lname_fname","parentNode","nextElementSibling","firstChild","student_name_arr","student_name","data","split","me","templateEmailContent","templateEmailSubject","has","get","emailText","params","textReplace","uniqueMatches","i","firstNameText","studentname","targetUser","userGradeText","assignmentgrade","customGradeText","customgrade","defaultGradeText","defaultgrade","courseTitleText","coursename","assignmentTitleText","assignmenttitle","replace","addUserInfo","student_template_data","create","title","type","ModalFactory","types","CANCEL","body","Templates","name","template_name","instructor_name","large","modal","show","send_button","send_button2","ids","create_notification_dialog","setup_send_emails","send_string","send_dialog_text","send","cancel","sent_email","sent_dialog_text","confirm","done","alert","fail","event","target","classList","contains"],"mappings":"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"}