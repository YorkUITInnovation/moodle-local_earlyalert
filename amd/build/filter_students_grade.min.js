define("local_earlyalert/filter_students_grade",["exports","core/ajax","core/templates"],(function(_exports,_ajax,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates);_exports.init=()=>{document.addEventListener("click",(function(event){if(event.target.classList.contains("early-alert-type-button")){let dataLink=event.target.getAttribute("data-link"),link=event.target.getAttribute("data-href");window.location=link+"&alert_type="+dataLink}})),function(){const course_id=document.getElementById("early_alert_filter_course_id").value;console.log("Course ID is "+course_id),function(course_id,$grade_letter_id){if((course_id=parseInt(course_id))>0){_templates.default.render("local_earlyalert/loader",{}).then((function(html,js){document.getElementById("early-alert-student-results").innerHTML=html,_templates.default.runTemplateJS(js)})).catch((function(error){console.error("Failed to render template:",error)})),_ajax.default.call([{methodname:"earlyalert_course_grades_percent_get",args:{id:course_id,grade_letter_id:$grade_letter_id}}])[0].done((function(results){let num_students=results.length,num_rows=Math.min(3,Math.ceil(num_students/3)),num_cols=Math.ceil(num_students/num_rows),display_data={num_rows:num_rows,num_cols:num_cols,student_rows:[]};for(let r=0;r<num_rows;r++)display_data.student_rows[r]={students:[]};let row=0,col=0;results.forEach((result=>{"object"==typeof result&&(display_data.student_rows[row].students[col]=result,col++,col===num_cols&&(col=0,row++))})),"grade"===document.getElementById("early-alert-alert-type").value&&(display_data.alert_type="Low Grade"),_templates.default.render("local_earlyalert/course_student_list",display_data).then((function(html,js){document.getElementById("early-alert-student-results").innerHTML=html,_templates.default.runTemplateJS(js)})).catch((function(error){console.error("Failed to render template:",error)}))})).fail((function(e){alert(e)}))}}(course_id,9)}()}}));

//# sourceMappingURL=filter_students_grade.min.js.map