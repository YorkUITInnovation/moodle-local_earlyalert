define("local_earlyalert/filter_students_grade",["exports","core/ajax"],(function(_exports,_ajax){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj};function setup_filter_students_by_grade(course_id,$grade_letter_id){let selected_students=[];_ajax.default.call([{methodname:"earlyalert_course_grades_percent_get",args:{id:course_id,grade_letter_id:$grade_letter_id}}])[0].done((function(results){const students_gradesList=document.getElementById("early_alert_filter_students_container");students_gradesList.innerHTML="";const ulElement=document.createElement("ul");let select_all_checkbox=document.createElement("INPUT");select_all_checkbox.type="checkbox",select_all_checkbox.className="early_alert_filterform_select_all_checkbox",select_all_checkbox.id="early_alert_filterform_select_all_checkbox_0";let select_all_li=document.createElement("LI"),select_all_label=document.createElement("LABEL");select_all_label.textContent="Select All/None",select_all_label.htmlFor="early_alert_filterform_select_all_checkbox";let no_record=document.createElement("LABEL");no_record.textContent="No records",no_record.id="early_alert_filterform_li_nothing",select_all_li.appendChild(select_all_checkbox),select_all_li.appendChild(select_all_label),ulElement.appendChild(select_all_li);let i=0,student_ids_selected=document.querySelector('input[name="student_ids"]')||{};student_ids_selected.value=[],results.forEach((item=>{let li=document.createElement("LI"),checkbox=document.createElement("INPUT");checkbox.type="checkbox",checkbox.className="early_alert_filterform_checkbox",checkbox.id="early_alert_filterform_checkbox_".concat(i),checkbox.setAttribute("user_id",item.id),li.appendChild(checkbox);let col1Div=document.createElement("DIV");col1Div.className="column1";let label=document.createElement("LABEL");label.textContent=item.first_name+" "+item.last_name,label.htmlFor="early_alert_filterform_checkbox_".concat(i),col1Div.appendChild(checkbox),col1Div.appendChild(label),li.appendChild(col1Div);let col2Div=document.createElement("DIV");col2Div.className="column2";let pillSpan=document.createElement("SPAN");pillSpan.className="pill red",pillSpan.textContent=item.grade,pillSpan.id="early_alert_filterform_grade_pill_".concat(i),pillSpan.style.display="none",col2Div.appendChild(pillSpan);let valueSpan=document.createElement("SPAN");valueSpan.className="value-text",col2Div.appendChild(valueSpan),li.appendChild(col2Div),ulElement.appendChild(li),i++})),students_gradesList.appendChild(ulElement),select_all_checkbox.addEventListener("change",(function(){document.querySelectorAll("input[class^='early_alert_filterform_checkbox']").forEach((function(checkbox){select_all_checkbox.checked?(checkbox.checked=!0,selected_students.push(checkbox.getAttribute("user_id"))):(checkbox.checked=!1,selected_students=selected_students.filter((item=>item!==checkbox.getAttribute("user_id"))))})),student_ids_selected.value=JSON.stringify(selected_students)})),document.querySelectorAll("input[class^='early_alert_filterform_checkbox']").forEach((function(checkbox){checkbox.addEventListener("click",(function(){checkbox.checked?selected_students.push(checkbox.getAttribute("user_id")):selected_students=selected_students.filter((item=>item!==checkbox.getAttribute("user_id"))),student_ids_selected.value=JSON.stringify(selected_students)}))})),function(){const show_grade_checkbox=document.getElementById("id_early_alert_filter_grade_chk");show_grade_checkbox.addEventListener("click",(function(){document.querySelectorAll("span.pill").forEach((function(grade_pill){show_grade_checkbox.checked?"none"==grade_pill.style.display&&(grade_pill.style.display="block"):grade_pill.style.display="none"}))}))}()})).fail((function(e){alert(e)}))}_exports.init=()=>{!function(){const selected_grade=document.getElementById("id_early_alert_filter_grade_select");let $grade_letter_id=0;const course_id=document.getElementsByName("early_alert_filter_course_id")[0].value;setup_filter_students_by_grade(course_id,$grade_letter_id),selected_grade.addEventListener("change",(function(){$grade_letter_id=selected_grade.value,setup_filter_students_by_grade(course_id,$grade_letter_id)}))}()}}));

//# sourceMappingURL=filter_students_grade.min.js.map