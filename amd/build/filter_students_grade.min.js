define("local_earlyalert/filter_students_grade",["exports","core/ajax"],(function(_exports,_ajax){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=(obj=_ajax)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{!function(){const course_id=document.getElementsByName("early_alert_filter_course_id")[0].value;_ajax.default.call([{methodname:"earlyalert_course_grades_percent_get",args:{id:course_id}}])[0].done((function(results){const students_gradesList=document.getElementById("early_alert_filter_students_container");students_gradesList.innerHTML="";const ulElement=document.createElement("ul");let select_all_checkbox=document.createElement("INPUT");select_all_checkbox.type="checkbox",select_all_checkbox.className="early_alert_filterform_select_all_checkbox",select_all_checkbox.id="early_alert_filterform_select_all_checkbox_0";let select_all_li=document.createElement("LI"),select_all_label=document.createElement("LABEL");select_all_label.textContent="Select All",select_all_label.htmlFor="early_alert_filterform_select_all_checkbox",select_all_li.appendChild(select_all_checkbox),select_all_li.appendChild(select_all_label),ulElement.appendChild(select_all_li);let i=0,selected_students=[];results.forEach((item=>{let li=document.createElement("LI"),checkbox=document.createElement("INPUT");checkbox.type="checkbox",checkbox.className="early_alert_filterform_checkbox",checkbox.id="early_alert_filterform_checkbox_".concat(i),checkbox.setAttribute("user_id",item.id),li.appendChild(checkbox);let col1Div=document.createElement("DIV");col1Div.className="column1";let label=document.createElement("LABEL");label.textContent=item.first_name+" "+item.last_name,label.htmlFor="early_alert_filterform_checkbox_".concat(i),col1Div.appendChild(checkbox),col1Div.appendChild(label),li.appendChild(col1Div);let col2Div=document.createElement("DIV");col2Div.className="column2";let pillSpan=document.createElement("SPAN");pillSpan.className="pill red",pillSpan.textContent="5",pillSpan.textContent=item.grade,col2Div.appendChild(pillSpan);let valueSpan=document.createElement("SPAN");valueSpan.className="value-text",valueSpan.textContent="!",col2Div.appendChild(valueSpan),li.appendChild(col2Div),ulElement.appendChild(li),i++})),students_gradesList.appendChild(ulElement),select_all_checkbox.addEventListener("change",(function(){document.querySelectorAll("input[class^='early_alert_filterform_checkbox']").forEach((function(checkbox){select_all_checkbox.checked?(checkbox.checked=!0,selected_students.push(checkbox.getAttribute("user_id"))):(checkbox.checked=!1,selected_students=selected_students.filter((item=>item!==checkbox.getAttribute("user_id"))))}))})),document.querySelectorAll("input[class^='early_alert_filterform_checkbox']").forEach((function(checkbox){checkbox.addEventListener("click",(function(){checkbox.checked?selected_students.push(checkbox.getAttribute("user_id")):selected_students=selected_students.filter((item=>item!==checkbox.getAttribute("user_id")))}))}))})).fail((function(e){alert(e)}))}()}}));

//# sourceMappingURL=filter_students_grade.min.js.map